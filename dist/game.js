webpackJsonp([0],[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.superclass=t}return a(e,[{key:"with",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return t(e)},this.superclass)}}]),e}();e.exports=function(e){return new o(e)}},,,,,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.game,e.x,e.y,e.name));return e.game.add.existing(n),e.game.physics.enable(n,Phaser.Physics.ARCADE),n.body.immovable=!0,n.body.allowGravity=!1,n}return o(t,e),t}(Phaser.Sprite);e.exports=i},function(e,t,n){e.exports=n(7)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n(3),n(4);var u=n(2),s=r(u),c=n(12),l=r(c);new(function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,500,500,s.default.AUTO,"container",null));return e.state.add("GameState",l.default,!1),e.state.start("GameState"),e}return i(t,e),t}(s.default.Game))},,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),s=(r(u),n(2)),c=r(s),l=n(13),f=r(l),p=n(16),h=r(p),y=n(17),d=r(y),b=n(18),g=r(b),m=n(19),v=(r(m),function(){function e(t){a(this,e),this.game=t}return i(e,[{key:"preload",value:function(){var e={groundTile:"./assets/gfx/ground.png",mapData:"./assets/mapdata/sandbox.json"};this.game.load.image("ground",e.groundTile),this.game.load.image("player","./assets/gfx/player.png"),this.game.load.image("bug","./assets/gfx/bug.png"),this.game.load.image("tiles","./assets/tilemaps/tiles/salt-tiles.png"),this.game.load.json("enemies","./assets/gamedata/enemies.json"),this.game.load.json("items","./assets/gamedata/items.json"),this.game.load.json("mapdata-sandbox",e.mapData)}},{key:"create",value:function(){this.game.stage.backgroundColor=8960972,this.MAX_SPEED=250,this.ACCELERATION=2500,this.DRAG=1500,this.GRAVITY=2500,this.JUMP_SPEED=-500,this.player=new g.default({game:this.game,x:128,y:64,name:"player",MAX_SPEED:this.MAX_SPEED,DRAG:this.DRAG}),this.game.physics.arcade.gravity.y=this.GRAVITY,this.jumping=!1,this.ground=this.game.add.group(),this.enemies=this.game.add.group(),this.pickups=this.game.add.group();var e=this.game.cache.getJSON("mapdata-sandbox"),t=h.default.create(e,32);this.generateMap(t,e,32),this.game.input.keyboard.addKeyCapture([c.default.Keyboard.LEFT,c.default.Keyboard.RIGHT,c.default.Keyboard.UP,c.default.Keyboard.DOWN]),this.drawHeightMarkers()}},{key:"generateMap",value:function(e,t,n){var r=this,a=0,i=0,u=d.default.generateCSV(e);this.game.cache.addTilemap("dynamicMap",null,u,c.default.Tilemap.CSV),this.levelTileMap=this.game.add.tilemap("dynamicMap",n,n),this.levelTileMap.addTilesetImage("tiles","tiles",n,n),this.levelTileMap.setCollisionBetween(0,this.levelTileMap.tiles.length),this.levelLayer=this.levelTileMap.createLayer(0);for(var s=0;s<e.area;s+=1){if(a+=1,s%e.width==0&&(i+=1,a=0),2===e.atIndex(s)){var l=f.default.create({type:2,game:this.game,x:a*n,y:(i-1)*n,name:"health"});this.pickups.add(l)}if(3===e.atIndex(s)){var p=f.default.create({type:2,game:this.game,x:a*n,y:(i-1)*n,name:"shield"});this.pickups.add(p)}}for(var h=0;h<t.enemies.length;h++){var y=function(a){var o=t.enemies[a],i=r.game.cache.getJSON("enemies").find(function(e){return e.id===o.id}).properties;if(e.atIndex(o.x+o.y))return console.error("That tile is already taken."),{v:void 0};var u=f.default.create({type:3,game:r.game,x:o.x*n,y:o.y*n,name:o.name,target:r.player,properties:i});r.enemies.add(u)}(h);if("object"===(void 0===y?"undefined":o(y)))return y.v}}},{key:"update",value:function(){this.game.physics.arcade.collide(this.player,this.levelLayer),this.game.physics.arcade.collide(this.enemies,this.levelLayer),this.game.physics.arcade.overlap(this.player,this.pickups,function(e,t){return t.kill()}),this.leftInputIsActive()?this.player.body.acceleration.x=-this.ACCELERATION:this.rightInputIsActive()?this.player.body.acceleration.x=this.ACCELERATION:this.player.body.acceleration.x=0,this.player.body.blocked.down&&(this.jumps=2,this.jumping=!1),this.jumps>0&&this.upInputIsActive(150)&&(this.player.body.velocity.y=this.JUMP_SPEED,this.jumping=!0),this.jumping&&this.upInputReleased()&&(this.jumps--,this.jumping=!1)}},{key:"leftInputIsActive",value:function(){return this.input.keyboard.isDown(c.default.Keyboard.LEFT)}},{key:"rightInputIsActive",value:function(){return this.input.keyboard.isDown(c.default.Keyboard.RIGHT)}},{key:"upInputIsActive",value:function(e){return this.input.keyboard.downDuration(c.default.Keyboard.UP,e)}},{key:"upInputReleased",value:function(){return this.input.keyboard.upDuration(c.default.Keyboard.UP)}},{key:"drawHeightMarkers",value:function(){for(var e=this.game.add.bitmapData(this.game.width,this.game.height),t=this.game.height-20;t>=0;t-=32)e.context.beginPath(),e.context.strokeStyle="rgba(255, 255, 255, 0.2)",e.context.moveTo(0,t),e.context.lineTo(this.game.width,t),e.context.stroke();this.game.add.image(0,0,e)}}]),e}());t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),u=r(i),s=n(14),c=r(s),l=n(15),f=r(l),p=n(19),h=r(p),y=function(){function e(){a(this,e)}return o(e,null,[{key:"create",value:function(e){switch(e.type){case 0:return new u.default(e);case 1:return new c.default(e);case 2:return new f.default(e);case 3:return new h.default(e)}}}]),e}();e.exports=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),l=n(5),f=r(l),p=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.body.onCollide=new Phaser.Signal,n.body.onCollide.add(n.onInteract,n),n}return i(t,e),u(t,[{key:"onInteract",value:function(){console.log("Player hit me!")}}]),t}((0,c.default)(f.default).with());e.exports=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.game,e.x,e.y,e.name));return e.game.add.existing(n),e.game.physics.enable(n,Phaser.Physics.ARCADE),n.body.immovable=!0,n.body.allowGravity=!1,n.entityData=e.properties,n}return o(t,e),t}((0,u.default)(Phaser.Sprite).with());e.exports=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this.mapCache=[],this.area=0,this.width=0,this.height=0}return a(e,[{key:"create",value:function(e,t){return this.width=e.map[0].length,this.height=e.map.length,this.area=this.width*this.height,this.mapCache=e.map.reduce(function(e,t){return e.concat(t)}),this}},{key:"atIndex",value:function(e){return e<0||e>this.mapCache.length-1?null:this.mapCache[e]}}]),e}(),i=i||new o;e.exports=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return a(e,null,[{key:"generateTileScore",value:function(e,t,n,r){var a=0;return a+=e?1:0,a+=r?2:0,a+=n?4:0,a+=t?8:0}},{key:"generateCSV",value:function(e){for(var t="",n=0,r=e.width-1,a=(e.height,0);a<e.area;a+=1)n=1===e.atIndex(a)?this.generateTileScore(e.atIndex(a-e.width),e.atIndex(a+1),e.atIndex(a+e.width),e.atIndex(a-1)):-1,t+=n,a<e.area-1&&(t+=","),a%e.width===r&&(t+="\n");return console.log(t),t}}]),e}();e.exports=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.game,e.x,e.y,e.name));return e.game.add.existing(n),e.game.physics.enable(n,Phaser.Physics.ARCADE),n.body.collideWorldBounds=!0,n.body.maxVelocity.setTo(e.MAX_SPEED,10*e.MAX_SPEED),n.body.drag.setTo(e.DRAG,0),n.entityData=e.properties,n}return o(t,e),t}(Phaser.Sprite);e.exports=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),l=n(20),f=r(l),p=n(21),h=r(p),y=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.game,e.x,e.y,e.name));return e.game.add.existing(n),e.game.physics.enable(n,Phaser.Physics.ARCADE),n.body.collideWorldBounds=!0,n.status=e.properties.status,n.gambits=e.properties.gambits,n.target=e.target,n}return i(t,e),u(t,[{key:"update",value:function(){this.status.has_los=f.default.inLOS(this,this.target);this.analyse(this.gambits,this.status,this.target)}}]),t}((0,c.default)(Phaser.Sprite).with(h.default));e.exports=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return a(e,null,[{key:"inLOS",value:function(e,t){return!0}}]),e}();e.exports=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){return function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"analyse",value:function(e,t,n){var r=e.find(function(e){return e.isDefault}),a=e.find(function(e){return this.conditionRunner(e,t)},this);return a?a.actionIfTrue:r.actionIfTrue}},{key:"conditionRunner",value:function(e,t){var n=t[e.identifier],r=e.against?t[e.against]:null,a=!1;switch(e.operator){case"boolean":a=n===e.value;break;case"less_than":a=e.value>0&&e.percentile?n<r*e.value:n<r;break;case"greater_than":a=e.value>0&&e.percentile?n>r*e.value:n>r;break;case"equal_to":a=e.value===n;break;case"not_equal_to":a=e.value!==n}return e.and&&e.and.length>0?e.and.every(function(e){return this.conditionRunner(e,t)},this)&&a:e.or&&e.or.length>0?e.and.every(function(e){return this.conditionRunner(e,t)},this)||a:a}}]),t}(e)};e.exports=u}],[6]);